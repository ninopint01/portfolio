/*!
 * Observer 3.10.2
 * https://greensock.com
 * 
 * @license Copyright 2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
 */

let e,t,n,o,r,s,l,i,a,c,d,u,g=()=>e||"undefined"!=typeof window&&(e=window.gsap)&&e.registerPlugin&&e,h=1,p=[],f=[],v=[],m=Date.now,x=(e,t)=>t,y=(e,t)=>~v.indexOf(e)&&v[v.indexOf(e)+1][t],b=e=>!!~d.indexOf(e),w=(e,t,n,o)=>e.addEventListener(t,n,{passive:!o}),T=(e,t,n)=>e.removeEventListener(t,n),X=()=>u&&u.isPressed||f.cache++,Y=e=>t=>(t||0===t?(h&&(o.history.scrollRestoration="manual"),e(t),e.v=t,e.c=f.cache,u&&u.isPressed&&x("ss",t)):(f.cache!==e.c||x("ref"))&&(e.c=f.cache,e.v=e()),e.v),D={s:"scrollLeft",p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:Y((function(e){return arguments.length?o.scrollTo(e,M.sc()):o.pageXOffset||r.scrollLeft||s.scrollLeft||l.scrollLeft||0}))},M={s:"scrollTop",p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:D,sc:Y((function(e){return arguments.length?o.scrollTo(D.sc(),e):o.pageYOffset||r.scrollTop||s.scrollTop||l.scrollTop||0}))},O=t=>e.utils.toArray(t)[0]||("string"==typeof t&&!1!==e.config().nullTargetWarn?console.warn("Element not found:",t):null),_=(e,{s:t,sc:n})=>{let o=f.indexOf(e),r=n===M.sc?1:2;return!~o&&(o=f.push(e)-1),f[o+r]||(f[o+r]=y(e,t)||(b(e)?n:function(n){return arguments.length?e[t]=n:e[t]}))},P=(e,t,n)=>{let o=e,r=e,s=m(),l=s,i=t||50,a=Math.max(500,3*i),c=(e,t)=>{let a=m();t||a-s>i?(r=o,o=e,l=s,s=a):n?o+=e:o=r+(e-r)/(a-l)*(s-l)};return{update:c,reset:()=>{r=o=n?0:o,l=s=0},getVelocity:e=>{let t=l,i=r,d=m();return(e||0===e)&&e!==o&&c(e),s===l||d-l>a?0:(o+(n?i:-i))/((n?d:s)-t)*1e3}}},E=(e,t)=>(t&&e.preventDefault(),e.changedTouches?e.changedTouches[0]:e),L=e=>{let t=Math.max(...e),n=Math.min(...e);return Math.abs(t)>=Math.abs(n)?t:n},S=c=>(e=c||g(),e&&!t&&"undefined"!=typeof document&&document.body&&(o=window,r=document,s=r.documentElement,l=r.body,d=[o,r,s,l],n=e.utils.clamp,a="onpointerenter"in l?"pointer":"mouse",i=C.isTouch=o.matchMedia&&o.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in o||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,setTimeout(()=>h=0,500),t=1),t);D.op=M,f.cache=0;class C{constructor(e){this.init(e)}init(n){t||S(e)||console.warn("Please gsap.registerPlugin(Observer)"),c||(c=e.core.globals().ScrollTrigger,c&&c.core&&(()=>{let e=c.core,t=e.bridge||{},n=e._scrollers,o=e._proxies;n.push(...f),o.push(...v),f=n,v=o,x=(e,n)=>t[e](n)})());let{tolerance:d,dragMinimum:g,type:h,target:m,lineHeight:y,debounce:Y,preventDefault:C,onStop:G,onStopDelay:H,ignore:k,wheelSpeed:A,event:R,onDragStart:V,onDragEnd:W,onDrag:B,onPress:F,onRelease:q,onRight:z,onLeft:I,onUp:N,onDown:U,onChangeX:j,onChangeY:J,onChange:K,onToggleX:Q,onToggleY:Z,onHover:$,onHoverEnd:ee,onMove:te,ignoreCheck:ne,isNormalizer:oe,onGestureStart:re,onGestureEnd:se,onWheel:le,onEnable:ie,onDisable:ae,onClick:ce,scrollSpeed:de}=n;this.target=m=O(m)||s,this.vars=n,k&&(k=e.utils.toArray(k)),d=d||0,g=g||0,A=A||1,de=de||1,h=h||"wheel,touch,pointer",Y=!1!==Y,y||(y=parseFloat(o.getComputedStyle(l).lineHeight)||22);let ue,ge,he,pe,fe,ve=this,me=0,xe=0,ye=_(m,D),be=_(m,M),we=ye(),Te=be(),Xe=("ontouchstart"in s?"touchstart,touchmove,touchcancel,touchend":h.indexOf("pointer")>=0&&!("onpointerdown"in s)?"mousedown,mousemove,mouseup,mouseup":"pointerdown,pointermove,pointercancel,pointerup").split(","),Ye=~h.indexOf("touch")&&!~h.indexOf("pointer")&&"pointerdown"===Xe[0],De=b(m),Me=m.ownerDocument||r,Oe=[0,0,0],_e=[0,0,0],Pe=(e,t)=>(ve.event=e)&&k&&~k.indexOf(e.target)||t&&Ye&&"touch"!==e.pointerType||ne&&ne(e),Ee=()=>{let e=ve.deltaX=L(Oe),t=ve.deltaY=L(_e),n=Math.abs(e)>=d,o=Math.abs(t)>=d;K&&(n||o)&&K(ve,e,t,Oe,_e),n&&(z&&ve.deltaX>0&&z(ve),I&&ve.deltaX<0&&I(ve),j&&j(ve),Q&&ve.deltaX<0!=me<0&&Q(ve),me=ve.deltaX,Oe[0]=Oe[1]=Oe[2]=0),o&&(U&&ve.deltaY>0&&U(ve),N&&ve.deltaY<0&&N(ve),J&&J(ve),Z&&ve.deltaY<0!=xe<0&&Z(ve),xe=ve.deltaY,_e[0]=_e[1]=_e[2]=0),pe&&(te(ve),pe=!1),he&&(B(ve),he=!1),fe&&(le(ve),fe=!1),ue=0},Le=(e,t,n)=>{Oe[n]+=e,_e[n]+=t,ve._vx.update(e,2===n),ve._vy.update(t,2===n),Y?ue||(ue=requestAnimationFrame(Ee)):Ee()},Se=e=>{if(Pe(e,1))return;let t=(e=E(e,C)).clientX,n=e.clientY,o=t-ve.x,r=n-ve.y,s=ve.isDragging;ve.x=t,ve.y=n,(s||Math.abs(ve.startX-t)>=g||Math.abs(ve.startY-n)>=g)&&(B&&(he=!0),s||(ve.isDragging=!0),Le(o,r,2),s||V&&V(ve))},Ce=ve.onPress=e=>{Pe(e,1)||(ge.pause(),ve.isPressed=!0,e=E(e,C),me=xe=0,ve.startX=ve.x=e.clientX,ve.startY=ve.y=e.clientY,ve._vx.reset(),ve._vy.reset(),w(oe?m:Me,Xe[1],Se,C),ve.deltaX=ve.deltaY=0,F&&F(ve))},Ge=e=>{if(Pe(e,1))return;T(oe?m:Me,Xe[1],Se);let t=ve.isDragging;t||(ve._vx.reset(),ve._vy.reset()),ve.isDragging=ve.isGesturing=ve.isPressed=!1,G&&!oe&&ge.restart(!0),W&&t&&W(ve),q&&q(ve,t)},He=e=>e.touches&&e.touches.length>1&&(ve.isGesturing=!0)&&re(e,ve.isDragging),ke=()=>(ve.isGesturing=!1)||se(ve),Ae=e=>{if(Pe(e))return;let t=ye(),n=be();Le((t-we)*de,(n-Te)*de,1),we=t,Te=n,G&&ge.restart(!0)},Re=e=>{if(Pe(e))return;e=E(e,C),le&&(fe=!0);let t=(1===e.deltaMode?y:2===e.deltaMode?o.innerHeight:1)*A;Le(e.deltaX*t,e.deltaY*t,0),G&&!oe&&ge.restart(!0)},Ve=e=>{if(Pe(e))return;let t=e.clientX,n=e.clientY,o=t-ve.x,r=n-ve.y;ve.x=t,ve.y=n,te&&(pe=!0),(o||r)&&Le(o,r,2)},We=e=>{ve.event=e,$(ve)},Be=e=>{ve.event=e,ee(ve)},Fe=e=>Pe(e)||E(e,C)&&ce(ve);ge=ve._dc=e.delayedCall(H||.25,()=>{ve._vx.reset(),ve._vy.reset(),ge.pause(),G&&G(ve)}).pause(),ve.deltaX=ve.deltaY=0,ve._vx=P(0,50,!0),ve._vy=P(0,50,!0),ve.scrollX=ye,ve.scrollY=be,ve.isDragging=ve.isGesturing=ve.isPressed=!1,ve.enable=e=>(ve.isEnabled||(w(De?Me:m,"scroll",X),h.indexOf("scroll")>=0&&w(De?Me:m,"scroll",Ae,C),h.indexOf("wheel")>=0&&w(m,"wheel",Re,C),(h.indexOf("touch")>=0&&i||h.indexOf("pointer")>=0)&&(w(m,Xe[0],Ce,C),w(Me,Xe[2],Ge),w(Me,Xe[3],Ge),ce&&w(m,"click",Fe),re&&w(Me,"gesturestart",He),se&&w(Me,"gestureend",ke),$&&w(m,a+"enter",We),ee&&w(m,a+"leave",Be),te&&w(m,a+"move",Ve)),ve.isEnabled=!0,e&&e.type&&Ce(e),ie&&ie(ve)),ve),ve.disable=()=>{ve.isEnabled&&(p.filter(e=>e!==ve&&b(e.target)).length||T(De?Me:m,"scroll",X),T(De?Me:m,"scroll",Ae),T(m,"wheel",Re),T(m,Xe[0],Ce),T(Me,Xe[2],Ge),T(Me,Xe[3],Ge),T(m,"click",Fe),T(Me,"gesturestart",He),T(Me,"gestureend",ke),T(m,a+"enter",We),T(m,a+"leave",Be),T(m,a+"move",Ve),ve.isEnabled=!1,ae&&ae(ve))},ve.kill=()=>{ve.disable();let e=p.indexOf(ve);e>=0&&p.splice(e,1),u===ve&&(u=0)},p.push(ve),oe&&(u=ve),ve.enable(R)}get velocityX(){return this._vx.getVelocity()}get velocityY(){return this._vy.getVelocity()}}C.version="3.10.2",C.create=e=>new C(e),C.register=S,C.getAll=()=>p.slice(),C.getById=e=>p.filter(t=>t.vars.id===e)[0],g()&&e.registerPlugin(C);export default C;export{C as Observer,y as _getProxyProp,_ as _getScrollFunc,O as _getTarget,P as _getVelocityProp,D as _horizontal,b as _isViewport,v as _proxies,f as _scrollers,M as _vertical};
